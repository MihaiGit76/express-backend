(function(){"use strict";var e={1088:function(e,t,o){var s=o(3751),n=o(641);const r={id:"app"};function a(e,t,o,s,a,i){const c=(0,n.g2)("LessonList");return(0,n.uX)(),(0,n.CE)("div",r,[(0,n.bF)(c)])}var i=o(33);const c=["disabled"],l={key:0},u=["src"],h=["disabled","onClick"],d={key:1},p=["onClick"],b=["disabled"],k={key:0};function f(e,t,o,r,a,f){return(0,n.uX)(),(0,n.CE)("div",null,[t[16]||(t[16]=(0,n.Lk)("h2",null,"Available Lessons",-1)),(0,n.Lk)("button",{disabled:0===a.cart.length,onClick:t[0]||(t[0]=e=>a.showCart=!a.showCart)},(0,i.v_)(a.showCart?"Back to Lessons":"View Cart"),9,c),t[17]||(t[17]=(0,n.Lk)("label",{for:"sortAttribute"},"Sort by:",-1)),(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>a.sortAttribute=e),id:"sortAttribute"},[...t[8]||(t[8]=[(0,n.Lk)("option",{value:"subject"},"Subject",-1),(0,n.Lk)("option",{value:"location"},"Location",-1),(0,n.Lk)("option",{value:"price"},"Price",-1),(0,n.Lk)("option",{value:"spaces"},"Spaces",-1)])],512),[[s.u1,a.sortAttribute]]),(0,n.Lk)("label",null,[(0,n.bo)((0,n.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=e=>a.sortDescending=e)},null,512),[[s.lH,a.sortDescending]]),t[9]||(t[9]=(0,n.eW)(" Descending ",-1))]),t[18]||(t[18]=(0,n.Lk)("label",{for:"searchBox"},"Search:",-1)),(0,n.bo)((0,n.Lk)("input",{id:"searchBox",type:"text","onUpdate:modelValue":t[3]||(t[3]=e=>a.searchQuery=e),onInput:t[4]||(t[4]=(...e)=>f.searchLessons&&f.searchLessons(...e)),placeholder:"Type to search lessons..."},null,544),[[s.Jo,a.searchQuery]]),a.showCart?((0,n.uX)(),(0,n.CE)("div",d,[t[14]||(t[14]=(0,n.Lk)("h2",null,"Shopping Cart",-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(a.cart,(e,t)=>((0,n.uX)(),(0,n.CE)("div",{key:t,class:"lesson-card"},[(0,n.Lk)("h3",null,(0,i.v_)(e.subject),1),(0,n.Lk)("p",null,"Location: "+(0,i.v_)(e.location),1),(0,n.Lk)("p",null,"Price: £"+(0,i.v_)(e.price),1),(0,n.Lk)("button",{onClick:e=>f.removeFromCart(t)},"Remove",8,p)]))),128)),t[15]||(t[15]=(0,n.Lk)("h3",null,"Checkout",-1)),(0,n.Lk)("form",{onSubmit:t[7]||(t[7]=(0,s.D$)((...e)=>f.submitOrder&&f.submitOrder(...e),["prevent"]))},[(0,n.Lk)("label",null,[t[10]||(t[10]=(0,n.eW)(" Name: ",-1)),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>a.checkoutName=e),type:"text",required:""},null,512),[[s.Jo,a.checkoutName]])]),t[12]||(t[12]=(0,n.Lk)("br",null,null,-1)),(0,n.Lk)("label",null,[t[11]||(t[11]=(0,n.eW)(" Phone: ",-1)),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>a.checkoutPhone=e),type:"text",required:""},null,512),[[s.Jo,a.checkoutPhone]])]),t[13]||(t[13]=(0,n.Lk)("br",null,null,-1)),(0,n.Lk)("button",{disabled:!f.isFormValid},"Submit Order",8,b)],32),a.orderSubmitted?((0,n.uX)(),(0,n.CE)("p",k,"Order submitted successfully!")):(0,n.Q3)("",!0)])):((0,n.uX)(),(0,n.CE)("div",l,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(f.sortedLessons,e=>((0,n.uX)(),(0,n.CE)("div",{key:e._id,class:"lesson-card"},[(0,n.Lk)("img",{src:`http://localhost:3030/images/${e.image}`,alt:"Lesson image",width:"80",class:"lesson-image"},null,8,u),(0,n.Lk)("h3",null,(0,i.v_)(e.subject),1),(0,n.Lk)("p",null,"Location: "+(0,i.v_)(e.location),1),(0,n.Lk)("p",null,"Price: £"+(0,i.v_)(e.price),1),(0,n.Lk)("p",null,"Spaces: "+(0,i.v_)(e.spaces),1),(0,n.Lk)("button",{disabled:0===e.spaces,onClick:t=>f.addToCart(e)}," Add to Cart ",8,h)]))),128))]))])}o(4114),o(8111),o(116),o(3110);var m={data(){return{sortAttribute:"subject",sortDescending:!1,showCart:!1,checkoutName:"",checkoutPhone:"",orderSubmitted:!1,lessons:[],cart:[],searchQuery:""}},computed:{sortedLessons(){return[...this.lessons].sort((e,t)=>{const o=e[this.sortAttribute],s=t[this.sortAttribute];let n;return n="string"===typeof o?o.localeCompare(s):o-s,this.sortDescending?-n:n})},isFormValid(){const e=/^[A-Za-z\s]+$/.test(this.checkoutName),t=/^[0-9]+$/.test(this.checkoutPhone);return e&&t}},methods:{async loadLessons(){try{const e=await fetch("http://localhost:3030/lessons"),t=await e.json();this.lessons=t}catch(e){console.error("Failed to fetch lessons:",e)}},async searchLessons(){if(""!==this.searchQuery.trim())try{const e=await fetch(`http://localhost:3030/search?q=${this.searchQuery}`),t=await e.json();this.lessons=t}catch(e){console.error("Search failed:",e)}else await this.loadLessons()},addToCart(e){e.spaces>0&&(e.spaces-=1,this.cart.push({...e}))},removeFromCart(e){const t=this.cart[e],o=this.lessons.find(e=>e._id===t._id);o&&(o.spaces+=1),this.cart.splice(e,1)},async submitOrder(){if(this.isFormValid)try{await fetch("http://localhost:3030/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:this.checkoutName,phone:this.checkoutPhone,cart:this.cart})});for(let e of this.cart)await fetch(`http://localhost:3030/lesson/${e._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({spaces:e.spaces})});this.cart=[],this.checkoutName="",this.checkoutPhone="",this.orderSubmitted=!0,this.showCart=!1,await this.loadLessons(),alert("Your order has been placed successfully!")}catch(e){console.error("Checkout failed:",e),alert("Something went wrong during checkout.")}}},mounted(){this.loadLessons()}},L=o(6262);const v=(0,L.A)(m,[["render",f],["__scopeId","data-v-12be629b"]]);var y=v,C={name:"App",components:{LessonList:y}};const g=(0,L.A)(C,[["render",a]]);var w=g;(0,s.Ef)(w).mount("#app")}},t={};function o(s){var n=t[s];if(void 0!==n)return n.exports;var r=t[s]={exports:{}};return e[s].call(r.exports,r,r.exports,o),r.exports}o.m=e,function(){var e=[];o.O=function(t,s,n,r){if(!s){var a=1/0;for(u=0;u<e.length;u++){s=e[u][0],n=e[u][1],r=e[u][2];for(var i=!0,c=0;c<s.length;c++)(!1&r||a>=r)&&Object.keys(o.O).every(function(e){return o.O[e](s[c])})?s.splice(c--,1):(i=!1,r<a&&(a=r));if(i){e.splice(u--,1);var l=n();void 0!==l&&(t=l)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[s,n,r]}}(),function(){o.d=function(e,t){for(var s in t)o.o(t,s)&&!o.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={524:0};o.O.j=function(t){return 0===e[t]};var t=function(t,s){var n,r,a=s[0],i=s[1],c=s[2],l=0;if(a.some(function(t){return 0!==e[t]})){for(n in i)o.o(i,n)&&(o.m[n]=i[n]);if(c)var u=c(o)}for(t&&t(s);l<a.length;l++)r=a[l],o.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return o.O(u)},s=self["webpackChunkvue_frontend"]=self["webpackChunkvue_frontend"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=o.O(void 0,[504],function(){return o(1088)});s=o.O(s)})();
//# sourceMappingURL=app.b07c5870.js.map